import{j as s}from"./jsx-runtime-DdxpLdx6.js";import{r as n}from"./index-Bk7LAl9r.js";import{R as $}from"./quill.snow-CrofkH0a.js";import{a as y}from"./utils-CvxHGwbR.js";const z={"text-formatting":["bold","italic","underline","strike"],headers:[{header:[1,2,3,4,5,6,!1]}],lists:[{list:"ordered"},{list:"bullet"}],indentation:[{indent:"-1"},{indent:"+1"}],alignment:[{align:[]}],colors:[{color:[]},{background:[]}],blocks:["blockquote","code-block"],"links-media":["link","image","video"],history:["undo","redo"],clean:["clean"]},G=["text-formatting","lists","links-media","clean"];function Q(r){return r.map(i=>z[i])}const Y=["text-formatting","clean"],J=["text-formatting","headers","lists","links-media","clean"],K=["text-formatting","headers","lists","indentation","alignment","colors","blocks","links-media","history","clean"],ae={minimal:Y,standard:J,advanced:K},v=({current:r,max:i,className:l})=>{const d=i&&r>i*.8,g=i&&r>i;return s.jsxs("div",{className:y("mt-1 text-right text-xs text-gray-500",{"text-yellow-600":d&&!g,"text-red-600":g},l),children:[r,i&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mx-1",children:"/"}),i]})]})};try{v.displayName="CharacterCounter",v.__docgenInfo={description:"",displayName:"CharacterCounter",props:{current:{defaultValue:null,description:"",name:"current",required:!0,type:{name:"number"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const N=({message:r,className:i,id:l})=>r?s.jsx("div",{id:l,className:y("mt-1 text-xs text-red-600",i),role:"alert",children:r}):null;try{N.displayName="ErrorMessage",N.__docgenInfo={description:"",displayName:"ErrorMessage",props:{message:{defaultValue:null,description:"",name:"message",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}}}catch{}const R=({text:r,className:i,id:l})=>r?s.jsx("div",{id:l,className:y("mt-1 text-xs text-gray-600",i),children:r}):null;try{R.displayName="HelperText",R.__docgenInfo={description:"",displayName:"HelperText",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}}}catch{}const p={},T=n.forwardRef(({value:r,onChange:i,onTextChange:l,onSelectionChange:d,className:g,placeholder:A="Start typing...",minHeight:h=200,maxHeight:f,readOnly:k=!1,disabled:C=!1,toolbar:u={groups:G,show:!0},theme:a,showCharCount:w=!1,maxLength:b,error:L=!1,errorMessage:x,helperText:_,autoFocus:j=!1,tabIndex:I,"aria-label":M,"aria-describedby":O},B)=>{const o=n.useRef(null),E=n.useRef(null),q=n.useMemo(()=>x?`wysiwyg-error-${Math.random().toString(36).substr(2,9)}`:void 0,[x]),V=n.useMemo(()=>_?`wysiwyg-helper-${Math.random().toString(36).substr(2,9)}`:void 0,[_]),P=n.useMemo(()=>{const e={};return u.show!==!1?u.custom?e.toolbar=u.custom:u.groups&&(e.toolbar=Q(u.groups)):e.toolbar=!1,e},[u]),W=n.useMemo(()=>["header","bold","italic","underline","strike","list","bullet","indent","align","color","background","link","image","video","blockquote","code-block"],[]);n.useEffect(()=>{if(!a||!E.current)return;const t=E.current.style;a.borderColor&&t.setProperty("--wysiwyg-border-color",a.borderColor),a.borderRadius&&t.setProperty("--wysiwyg-border-radius",a.borderRadius),a.toolbarBg&&t.setProperty("--wysiwyg-toolbar-bg",a.toolbarBg),a.editorBg&&t.setProperty("--wysiwyg-editor-bg",a.editorBg),a.primary&&t.setProperty("--wysiwyg-primary",a.primary),a.fontFamily&&t.setProperty("--wysiwyg-font-family",a.fontFamily),a.fontSize&&t.setProperty("--wysiwyg-font-size",a.fontSize)},[a]);const F=n.useMemo(()=>{var t;if(!w||!r)return 0;const e=document.createElement("div");return e.innerHTML=r,((t=e.textContent)==null?void 0:t.length)||0},[r,w]);n.useImperativeHandle(B,()=>({getEditor:()=>{var e;return(e=o.current)==null?void 0:e.getEditor()},focus:()=>{var e;return(e=o.current)==null?void 0:e.focus()},blur:()=>{var e;return(e=o.current)==null?void 0:e.blur()},getText:()=>{var e;return((e=o.current)==null?void 0:e.getEditor().getText())||""},getHTML:()=>{var e;return((e=o.current)==null?void 0:e.getEditor().root.innerHTML)||""},getLength:()=>{var e;return((e=o.current)==null?void 0:e.getEditor().getLength())||0},insertText:e=>{var c;const t=(c=o.current)==null?void 0:c.getEditor();if(t){const m=t.getSelection();t.insertText((m==null?void 0:m.index)||0,e)}},setSelection:e=>{var t;(t=o.current)==null||t.getEditor().setSelection(e)}}),[]);const D=n.useCallback((e,t,c,m)=>{b&&m.getText().length>b||(i(e),l==null||l(t,m.getContents(),c))},[i,l,b]),H=n.useCallback((e,t,c)=>{d==null||d(e,t,c)},[d]),U=n.useMemo(()=>({minHeight:`${h}px`,...f&&{maxHeight:`${f}px`,overflowY:"auto"}}),[h,f]),S=n.useMemo(()=>[O,q,V].filter(Boolean).join(" ")||void 0,[O,q,V]);return s.jsxs("div",{className:y(p.wysiwygEditorWrapper,g),children:[s.jsx("div",{ref:E,className:y(p.wysiwygEditorContainer,{[p.wysiwygEditorError]:L,[p.wysiwygEditorDisabled]:C,[p.wysiwygEditorReadonly]:k}),style:{"--wysiwyg-min-height":`${h}px`,...f&&{"--wysiwyg-max-height":`${f}px`}},children:s.jsx($,{ref:o,theme:"snow",value:r,onChange:D,onChangeSelection:H,modules:P,formats:W,placeholder:A,readOnly:k||C,style:U,tabIndex:I,...j&&{autoFocus:!0},...M&&{"aria-label":M},...S&&{"aria-describedby":S}})}),s.jsxs("div",{className:p.wysiwygEditorFooter,children:[w&&s.jsx(v,{current:F,max:b}),s.jsx(N,{message:x,id:q}),s.jsx(R,{text:_,id:V})]})]})});T.displayName="WysiwygEditor";try{T.displayName="WysiwygEditor",T.__docgenInfo={description:"",displayName:"WysiwygEditor",props:{value:{defaultValue:null,description:"Current value of the editor",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when content changes",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onTextChange:{defaultValue:null,description:"Callback when editor content changes (with more details)",name:"onTextChange",required:!1,type:{name:"(delta: any, oldDelta: any, source: string) => void"}},onSelectionChange:{defaultValue:null,description:"Callback when selection changes",name:"onSelectionChange",required:!1,type:{name:"(selection: RangeStatic, source: Sources, editor: UnprivilegedEditor) => void"}},className:{defaultValue:null,description:"Additional CSS classes",name:"className",required:!1,type:{name:"string"}},placeholder:{defaultValue:{value:"Start typing..."},description:"Placeholder text",name:"placeholder",required:!1,type:{name:"string"}},minHeight:{defaultValue:{value:"200"},description:"Minimum height of editor",name:"minHeight",required:!1,type:{name:"number"}},maxHeight:{defaultValue:null,description:"Maximum height of editor",name:"maxHeight",required:!1,type:{name:"number"}},readOnly:{defaultValue:{value:"false"},description:"Whether editor is read-only",name:"readOnly",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether editor is disabled",name:"disabled",required:!1,type:{name:"boolean"}},toolbar:{defaultValue:{value:"{ groups: DEFAULT_TOOLBAR_GROUPS, show: true }"},description:"Toolbar configuration",name:"toolbar",required:!1,type:{name:"ToolbarConfig"}},theme:{defaultValue:null,description:"Theme customization",name:"theme",required:!1,type:{name:"EditorTheme"}},showCharCount:{defaultValue:{value:"false"},description:"Whether to show character count",name:"showCharCount",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"Maximum character limit",name:"maxLength",required:!1,type:{name:"number"}},error:{defaultValue:{value:"false"},description:"Error state",name:"error",required:!1,type:{name:"boolean"}},errorMessage:{defaultValue:null,description:"Error message",name:"errorMessage",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"Helper text",name:"helperText",required:!1,type:{name:"string"}},autoFocus:{defaultValue:{value:"false"},description:"Whether to auto focus",name:"autoFocus",required:!1,type:{name:"boolean"}},tabIndex:{defaultValue:null,description:"Tab index",name:"tabIndex",required:!1,type:{name:"number"}},"aria-label":{defaultValue:null,description:"ARIA label",name:"aria-label",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"ARIA described by",name:"aria-describedby",required:!1,type:{name:"string"}}}}}catch{}export{ae as T,T as W};
